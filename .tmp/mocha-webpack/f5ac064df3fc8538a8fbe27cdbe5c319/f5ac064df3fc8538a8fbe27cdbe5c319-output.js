!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=16)}([function(e,t){e.exports=require("chai")},function(e,t){e.exports=require("babel-runtime/regenerator")},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c});var r=n(3),a=n.n(r),o={},u=new a.a.Schema(o,{timestamps:!0});u.methods={authenticate:function(e){return bcrypt.compareSync(plainTextPword,this.password)},hashPassword:function(e){if(!e)throw new Error("Could not save user");var t=bcrypt.genSaltSync(10);return bcrypt.hashSync(e,t)}};var c=a.a.model("user",u)},function(e,t){e.exports=require("mongoose")},function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return l});var r=n(12),a=n.n(r),o=n(1),u=n.n(o),c=n(5),s=n.n(c),i=n(8),d=n.n(i),f=(n(19),{message:"hello"}),p={createOne:function(e,t){return d.a.resolve(f)},updateOne:function(e,t){return d.a.resolve(f)},deleteOne:function(e){return d.a.resolve(f)},getOne:function(e){return d.a.resolve(f)},getAll:function(e){return d.a.resolve(f)},findByParam:function(e,t){return d.a.resolve(f)}},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={findByParam:function(e){return function(t,n,r,a){return p.findByParam(e,a)}}(e),getAll:function(e){return function(t,n,r){return p.getAll(e).then(function(e){return n.status(201).json(e)}).catch(function(e){return r(e)})}}(e),getOne:function(e,t,n){return p.getOne(e.docFromId).then(function(e){return t.status(201).json(e)}).catch(function(e){return n(e)})},deleteOne:function(e,t,n){return p.deleteOne(e.docFromId).then(function(e){return t.status(201).json(e)}).catch(function(e){return n(e)})},updateOne:function(){var e=s()(u.a.mark(function e(t,n,r){var a,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.docFromId,o=t.body,e.abrupt("return",p.updateOne(a,o).then(function(e){return n.status(201).json(e)}).catch(function(e){return r(e)}));case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),createOne:function(e){return function(t,n,r){return p.createOne(e,t.body).then(function(e){return n.status(201).json(e)}).catch(function(e){return r(e)})}}(e)};return a()({},n,t)}},function(e,t){e.exports=require("babel-runtime/helpers/asyncToGenerator")},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c});var r=n(3),a=n.n(r),o={},u=new a.a.Schema(o),c=a.a.model("playlist",u)},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return c});var r=n(3),a=n.n(r),o={},u=new a.a.Schema(o),c=a.a.model("song",u)},function(e,t){e.exports=require("babel-runtime/core-js/promise")},function(e,t){e.exports=require("express")},function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(5),u=n.n(o),c=n(0),s=n.n(c),i=n(13),d=n.n(i),f=n(11),p=n(9),l=n.n(p),b=(n(21),function(e){}),x=n(4),v=n(2),h=Object(x.b)(v.a),m=l.a.Router();m.param("id",h.findByParam),m.route("/").get(h.getAll).post(h.createOne),m.route("/:id").get(h.getOne).put(h.updateOne).delete(h.deleteOne);var O=n(7),j=Object(x.b)(O.a),g=l.a.Router();g.param("id",j.findByParam),g.route("/").get(j.getAll).post(j.createOne),g.route("/:id").get(j.getOne).put(j.updateOne).delete(j.deleteOne);var y=n(6),w=Object(x.b)(y.a),q=l.a.Router();q.param("id",w.findByParam),q.route("/").get(w.getAll).post(w.createOne),q.route("/:id").get(w.getOne).put(w.updateOne).delete(w.deleteOne);var k=l.a.Router();k.use("/user",m),k.use("/song",g),k.use("/playlist",q);var S=n(3),P=n.n(S);P.a.Promise=global.Promise;var B=n(14),A=n.n(B),H=n(15),M=(n.n(H)()({secret:"blueRhinoJumps"}),function(e){return A.a.sign({id:e},"blueRhinoJumps",{expiresIn:"30d"})}),E=l()();b(E),P.a.connect("mongodb://localhost/jams",{useMongoClient:!0}),E.use("/signin",function(e,t,n){var r=M(e.user.id);t.json({token:r})}),E.use("/api",k),E.all("*",function(e,t){t.json({ok:!0})});var _=E;s.a.use(d.a);t.a=function(e,t,n){describe("/"+t,function(){var e=void 0;beforeEach(u()(a.a.mark(function t(){var n;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.a)();case 2:return t.next=4,v.a.create({username:"stu1",passwordHash:"123"});case 4:n=t.sent,e=M(n.id);case 6:case"end":return t.stop()}},t,void 0)}))),afterEach(u()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)();case 2:case"end":return e.stop()}},e,void 0)}))),describe("GET /"+t,function(){it("should get all "+t,u()(a.a.mark(function n(){var r;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.a.request(_).get("/api/"+t).set("Authorization","Bearer "+e);case 2:r=n.sent,Object(c.expect)(r).to.have.status(200),Object(c.expect)(r).to.be.json;case 5:case"end":return n.stop()}},n,void 0)})))}),describe("POST /"+t,function(){it("should create a "+t,u()(a.a.mark(function r(){var o;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.a.request(_).post("/api/"+t).set("Authorization","Bearer "+e).send(n);case 2:o=r.sent,Object(c.expect)(o).to.have.status(201),Object(c.expect)(o).to.be.json;case 5:case"end":return r.stop()}},r,void 0)})))})})}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(8),a=n.n(r),o=(n(2),n(6),n(7),n(3)),u=n.n(o);u.a.Promise=global.Promise;var c=function(e){var t=u.a.model(e);return new a.a(function(e,n){if(!t)return e();t.remove(function(t){t?n(t):e()})})},s=function(){return u.a.connect("mongodb://localhost/jams-test",{useMongoClient:!0}).then(function(){return a.a.all(u.a.modelNames().map(c))})}},function(e,t){e.exports=require("babel-runtime/helpers/extends")},function(e,t){e.exports=require("chai-http")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t){e.exports=require("express-jwt")},function(e,t,n){var r=n(17);r.keys().forEach(r)},function(e,t,n){var r={"./api/modules/query.spec.js":18,"./api/resources/playlist/playlist.spec.js":20,"./api/resources/song/song.spec.js":22,"./api/resources/user/user.spec.js":23};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=17},function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),o=n(1),u=n.n(o),c=n(5),s=n.n(c),i=n(0),d=n(11),f=n(4),p=n(2);describe("Modules",function(){beforeEach(s()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)();case 2:case"end":return e.stop()}},e,void 0)}))),afterEach(s()(u.a.mark(function e(){return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.a)();case 2:case"end":return e.stop()}},e,void 0)}))),xdescribe("query",function(){describe("createOne",function(){it("should create a document",s()(u.a.mark(function e(){var t;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.createOne(p.a,{username:"student12",passwordHash:"1234abcd"});case 2:t=e.sent,Object(i.expect)(t).to.be.ok,Object(i.expect)(t.id).to.be.ok,Object(i.expect)(t.username).to.equal("student12");case 6:case"end":return e.stop()}},e,void 0)})))}),describe("updateOne",function(){it("should update a document",s()(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.createOne(p.a,{username:"studentx",passwordHash:"1234sdkfj"});case 2:return t=e.sent,n="newStudentZ",e.next=6,f.a.updateOne(t,{username:n});case 6:r=e.sent,Object(i.expect)(r.username).to.equal(n),Object(i.expect)(r.id).to.equal(t.id);case 9:case"end":return e.stop()}},e,void 0)})))}),describe("deleteOne",function(){it("should delete a document",s()(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.createOne(p.a,{username:"studentx",passwordHash:"1234sdkfj"});case 2:return t=e.sent,e.next=5,f.a.deleteOne(t);case 5:return n=e.sent,Object(i.expect)(n.id).to.equal(t.id),e.t0=i.expect,e.next=10,p.a.findById(t.id);case 10:e.t1=e.sent,(0,e.t0)(e.t1).to.equal(null);case 12:case"end":return e.stop()}},e,void 0)})))}),describe("getOne",function(){it("should get one document",s()(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.createOne(p.a,{username:"studentx",passwordHash:"1234sdkfj"});case 2:return t=e.sent,e.next=5,f.a.getOne(t);case 5:n=e.sent,Object(i.expect)(n).to.equal(t);case 7:case"end":return e.stop()}},e,void 0)})))}),describe("getAll",function(){it("should get all documnets",s()(u.a.mark(function e(){var t,n,r;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=["student1","student2"],e.next=3,a.a.all(t.map(function(){var e=s()(u.a.mark(function e(t){var n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.createOne(p.a,{username:t,passwordHash:"1234qwer"});case 2:return n=e.sent,e.abrupt("return",n.toJSON());case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()));case 3:return n=e.sent,e.next=6,f.a.getAll(p.a);case 6:e.t0=function(e){return e.toJSON()},r=e.sent.map(e.t0),Object(i.expect)(r).to.have.length(n.length);case 9:case"end":return e.stop()}},e,void 0)})))}),describe("findByParam",function(){it("should find model my id",s()(u.a.mark(function e(){var t,n;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.createOne(p.a,{username:"student1",passwordHash:"1234qwe"});case 2:return t=e.sent.toJSON(),e.next=5,f.a.findByParam(p.a,t._id);case 5:n=e.sent.toJSON(),Object(i.expect)(n).to.deep.eql(t);case 7:case"end":return e.stop()}},e,void 0)})))})})})},function(e,t){e.exports=require("lodash.merge")},function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(0),o=n(6),u=n(3),c=n.n(u);describe("Playlist Model",function(){it("should have tilte",function(){Object(a.expect)(o.b.title).to.exist,Object(a.expect)(o.b.title.type).to.eql(String),Object(a.expect)(o.b.title.required).to.be.an("array")}),it("should have songs",function(){Object(a.expect)(o.b.songs).to.exist,Object(a.expect)(o.b.songs).to.be.an("array"),Object(a.expect)(o.b.songs[0].type).to.eql(c.a.Schema.Types.ObjectId),Object(a.expect)(o.b.songs[0].ref).to.eql("song")}),it("should have favorite",function(){Object(a.expect)(o.b.favorite).to.exist,Object(a.expect)(o.b.favorite.type).to.eql(Boolean),Object(a.expect)(o.b.favorite.required).to.equal(!0),Object(a.expect)(o.b.favorite.default).to.equal(!1)})}),Object(r.a)(o.a,"playlist",{title:"study jams",favorite:!0})},function(e,t){e.exports=require("body-parser")},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),o=n(7);describe("Song model",function(){it("should have tilte",function(){Object(r.expect)(o.b.title).to.exist,Object(r.expect)(o.b.title.required).to.be.an("array")}),it("should have url",function(){Object(r.expect)(o.b.url).to.exist,Object(r.expect)(o.b.url.unique).to.equal(!0),Object(r.expect)(o.b.url.required).to.be.an("array")}),it("should have album",function(){Object(r.expect)(o.b.album).to.exist}),it("should have artist",function(){Object(r.expect)(o.b.artist).to.exist}),it("should have rating",function(){Object(r.expect)(o.b.rating).to.exist,Object(r.expect)(o.b.rating.type).to.eql(Number)}),it("should have favorite",function(){Object(r.expect)(o.b.favorite).to.exist,Object(r.expect)(o.b.favorite.type).to.eql(Boolean)})}),Object(a.a)(o.a,"song",{title:"downtown jamming",url:"http://music.mp3"})},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(10),o=n(2);describe("User Model",function(){it("should have username",function(){Object(r.expect)(o.b.username).to.exist,Object(r.expect)(o.b.username.type).to.eql(String),Object(r.expect)(o.b.username.required).to.equal(!0),Object(r.expect)(o.b.username.unique).to.equal(!0)}),it("should have passwordHash",function(){Object(r.expect)(o.b.passwordHash).to.exist,Object(r.expect)(o.b.username.type).to.eql(String),Object(r.expect)(o.b.username.required).to.equal(!0)})}),Object(a.a)(o.a,"user",{username:"stu",passwordHash:"1223saf"})}]);
//# sourceMappingURL=f5ac064df3fc8538a8fbe27cdbe5c319-output.js.map